<div class="environment-container">
  <p class="environment-title"> {{environment.name}} </p>
  <div>
    <app-tooltip
      *ngIf="tooltip.show"
      [tooltip]="tooltip"
      [currentSnapshot]="currentSnapshot"
    ></app-tooltip>
    <svg id="{{environment.name}}-svg" xmlns="http://www.w3.org/2000/svg" [attr.width]="svgWidth" [attr.height]="svgHeight"
         (mouseenter)="enteredEnvironment($event)"
         (mouseleave)="leftEnvironment($event)"
         (mousemove)="moveTooltip($event)"
         (click)="updateClickOn()">
      <polygon
        *ngFor="let polygon of polygons"
        [attr.points]="polygon.toAttributeString()"
        [attr.fill]="getColor(polygon)"
        [attr.fill-opacity]="getOpacity(polygon)"
        (mouseenter)="enteredPolygon(polygon)"
        (mouseleave)="leftPolygon(polygon)"
      >
      </polygon>
      <rect
        *ngIf="currentSnapshot"
        id="cur-snapshot-line"
        [attr.x]="getLineX() - 1"
        [attr.y]="0"
        [attr.width]="2"
        [attr.height]="svgHeight - TIMELINE_HEIGHT + 10"
        fill="white"
      />
      <rect [attr.x]="0" [attr.y]="svgHeight - TIMELINE_HEIGHT + 10" [attr.width]="svgWidth" [attr.height]="2"
            fill="gray"/>
      <text
        *ngFor="let timelinePoint of timelinePoints; let i = index"
        [attr.x]="timelinePoint.x"
        [attr.y]="svgHeight - 12"
        [attr.text-anchor]="getTimelinePointTextAlignment(i)"
        font-size="12"
      >
        {{ timelinePoint.timeString }}
      </text>
      <text
        *ngFor="let timelinePoint of timelinePoints; let i = index"
        [attr.x]="timelinePoint.x"
        [attr.y]="svgHeight"
        [attr.text-anchor]="getTimelinePointTextAlignment(i)"
        font-size="12"
      >
        {{ timelinePoint.dateString }}
      </text>
      <line
        *ngFor="let timelinePoint of timelinePoints"
        [attr.x1]="timelinePoint.x"
        [attr.y1]="svgHeight - TIMELINE_HEIGHT + 2"
        [attr.x2]="timelinePoint.x"
        [attr.y2]="svgHeight - TIMELINE_HEIGHT / 2 - 3"
        stroke="gray"
      />
    </svg>
  </div>
</div>
